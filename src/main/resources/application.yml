server:
  port: ${SERVER_PORT:8199}

spring:
    application:
        name: lib-validate-license
    info:
        build:
            encoding: UTF-8

    # H2 Embedded Database Configuration
    datasource:
        url: jdbc:h2:file:./data/licenses;DB_CLOSE_ON_EXIT=FALSE;AUTO_RECONNECT=TRUE
        driver-class-name: org.h2.Driver
        username: sa
        password:

    jpa:
        database-platform: org.hibernate.dialect.H2Dialect
        hibernate:
            ddl-auto: update
        show-sql: false
        properties:
            hibernate:
                format_sql: true

    # H2 Console Configuration (accessible at /h2-console)
    h2:
        console:
            enabled: ${H2_CONSOLE_ENABLED:true}
            path: /h2-console
            settings:
                trace: false
                web-allow-others: false

# Email Configuration
email:
    from: ${EMAIL_FROM:noreply@tradingia.lat}
    enabled: ${EMAIL_ENABLED:true}

mailersend:
    api-token: ${MAILERSEND_API_TOKEN:}
    api-url: ${MAILERSEND_API_URL:https://api.mailersend.com/v1/email}

# Backup Configuration
backup:
    enabled: ${BACKUP_ENABLED:true}
    run-on-startup: ${BACKUP_RUN_ON_STARTUP:true}
    cron: ${BACKUP_CRON:0 0 1 * * ?}
    local-dir: ${BACKUP_LOCAL_DIR:/app/data/backups}
    max-files: ${BACKUP_MAX_FILES:7}
    r2:
        account-id: ${R2_ACCOUNT_ID:}
        access-key-id: ${R2_ACCESS_KEY_ID:}
        secret-access-key: ${R2_SECRET_ACCESS_KEY:}
        bucket-name: ${R2_BUCKET_NAME:trading-ia}

# Scheduler Configuration
scheduler:
    expiration-warning:
        enabled: ${SCHEDULER_ENABLED:true}
        cron: ${SCHEDULER_CRON:0 0 9 * * ?}  # Daily at 9:00 AM

security:
  jwe:
    secret-key: ${JWE_SECRET_KEY:12345678901234567890123456789012}
    expiration-seconds: ${JWE_EXPIRATION_SECONDS:3600}
    issuer: ${JWE_ISSUER:lib-validate-license}

